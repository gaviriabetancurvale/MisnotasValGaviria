<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Nota Deseada</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            display: flex;
            min-height: 100vh;
            background-color: #f8f9fa;
            color: #333;
        }

        /* Menú lateral */
        .sidebar {
            width: 250px;
            background-color: #9b59b6;
            color: white;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            box-shadow: 3px 0 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            height: 100vh;
            z-index: 100;
        }

        .logo {
            text-align: center;
            padding: 20px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .logo h1 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .logo p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .menu-item {
            padding: 15px 25px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }

        .menu-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #f1c40f;
        }

        .menu-item.active {
            background-color: rgba(255, 255, 255, 0.15);
            border-left: 4px solid #f1c40f;
        }

        .menu-item i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Contenido principal */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 30px;
            max-width: 1000px;
        }

        .header {
            margin-bottom: 30px;
        }

        .header h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        /* Tarjeta de instrucciones */
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }

        .card h3 {
            color: #9b59b6;
            margin-bottom: 15px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        .card h3 i {
            margin-right: 10px;
        }

        .instructions {
            color: #555;
            line-height: 1.6;
        }

        /* Controles de selección */
        .selection-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }

        .checkbox-group label {
            margin-left: 8px;
            font-weight: 500;
            cursor: pointer;
        }

        /* Formulario de notas */
        .grades-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .grade-input-group {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .grade-input-group h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
        }

        .grade-input-group h4 i {
            margin-right: 10px;
            color: #9b59b6;
        }

        .input-row {
            margin-bottom: 15px;
        }

        .input-row label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .input-row input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-row input:focus {
            border-color: #9b59b6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(155, 89, 182, 0.2);
        }

        .input-row input:disabled {
            background-color: #f5f5f5;
            color: #999;
            cursor: not-allowed;
        }

        /* Resultado */
        .result-container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        .result-header {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .result-value {
            font-size: 3rem;
            font-weight: bold;
            color: #9b59b6;
            margin: 20px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 10px;
        }

        .result-message {
            color: #7f8c8d;
            font-size: 1.1rem;
            margin-top: 15px;
        }

        /* Botones */
        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary {
            background-color: #9b59b6;
            color: white;
        }

        .btn-primary:hover {
            background-color: #8e44ad;
        }

        .btn-secondary {
            background-color: #ecf0f1;
            color: #34495e;
        }

        .btn-secondary:hover {
            background-color: #d5dbdb;
        }

        .btn i {
            margin-right: 8px;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                width: 220px;
            }
            
            .main-content {
                margin-left: 220px;
            }
        }

        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
                padding: 15px;
            }
            
            .logo {
                width: 100%;
                border-bottom: none;
                margin-bottom: 10px;
                padding: 10px;
            }
            
            .menu-item {
                padding: 10px 15px;
                margin: 5px;
                border-left: none;
                border-bottom: 3px solid transparent;
            }
            
            .menu-item:hover, .menu-item.active {
                border-left: none;
                border-bottom: 3px solid #f1c40f;
            }
            
            .main-content {
                margin-left: 0;
                padding: 20px;
            }
            
            .grades-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Menú lateral -->
    <div class="sidebar">
        <div class="logo">
            <h1><i class="fas fa-calculator"></i> Calculadora de Notas</h1>
            <p>Calcula lo que necesitas sacar</p>
        </div>
        
        <div class="menu-item active">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </div>
        
        <div class="menu-item">
            <i class="fas fa-calculator"></i>
            <span>Calculadora</span>
        </div>
        
        <div class="menu-item">
            <i class="fas fa-chart-bar"></i>
            <span>Estadísticas</span>
        </div>
        
        <div class="menu-item">
            <i class="fas fa-cog"></i>
            <span>Configuración</span>
        </div>
        
        <div class="menu-item">
            <i class="fas fa-question-circle"></i>
            <span>Ayuda</span>
        </div>
    </div>

    <!-- Contenido principal -->
    <div class="main-content">
        <div class="header">
            <h2>Calculadora de Nota Deseada</h2>
            <p>Ingresa las notas que ya tienes y calcula lo que necesitas en el último parcial</p>
        </div>

        <!-- Instrucciones -->
        <div class="card">
            <h3><i class="fas fa-info-circle"></i> Instrucciones</h3>
            <div class="instructions">
                <p>1. Selecciona qué notas deseas incluir en el cálculo marcando las casillas correspondientes.</p>
                <p>2. Ingresa las notas en los campos habilitados (las notas deben estar en escala de 0 a 5).</p>
                <p>3. Haz clic en "Calcular Nota Necesaria" para obtener el resultado.</p>
                <p>4. La fórmula utilizada es: <strong>Nota necesaria = [3 - (Suma de Quices × 0.05) - (Suma de Parciales × 0.20)] / 0.20</strong></p>
                <p>Nota: Si el resultado es mayor a 5, necesitarás más del máximo para alcanzar tu objetivo.</p>
            </div>
        </div>

        <!-- Controles de selección -->
        <div class="card">
            <h3><i class="fas fa-check-square"></i> Selecciona las notas a incluir</h3>
            <div class="selection-controls">
                <div class="checkbox-group">
                    <input type="checkbox" id="q1-check" checked>
                    <label for="q1-check">Quiz 1</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="p1-check" checked>
                    <label for="p1-check">Parcial 1</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="q2-check" checked>
                    <label for="q2-check">Quiz 2</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="p2-check" checked>
                    <label for="p2-check">Parcial 2</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="q3-check" checked>
                    <label for="q3-check">Quiz 3</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="p3-check" checked>
                    <label for="p3-check">Parcial 3</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="q4-check" checked>
                    <label for="q4-check">Quiz 4</label>
                </div>
            </div>
        </div>

        <!-- Formulario de notas -->
        <div class="grades-container">
            <!-- Quices -->
            <div class="grade-input-group">
                <h4><i class="fas fa-pencil-alt"></i> Notas de Quices (5% c/u)</h4>
                
                <div class="input-row">
                    <label for="q1">Quiz 1</label>
                    <input type="number" id="q1" min="0" max="5" step="0.01" value="3.5" disabled>
                </div>
                
                <div class="input-row">
                    <label for="q2">Quiz 2</label>
                    <input type="number" id="q2" min="0" max="5" step="0.01" value="4.0" disabled>
                </div>
                
                <div class="input-row">
                    <label for="q3">Quiz 3</label>
                    <input type="number" id="q3" min="0" max="5" step="0.01" value="3.0" disabled>
                </div>
                
                <div class="input-row">
                    <label for="q4">Quiz 4</label>
                    <input type="number" id="q4" min="0" max="5" step="0.01" value="4.2" disabled>
                </div>
            </div>

            <!-- Parciales -->
            <div class="grade-input-group">
                <h4><i class="fas fa-file-alt"></i> Notas de Parciales (20% c/u)</h4>
                
                <div class="input-row">
                    <label for="p1">Parcial 1</label>
                    <input type="number" id="p1" min="0" max="5" step="0.01" value="3.8" disabled>
                </div>
                
                <div class="input-row">
                    <label for="p2">Parcial 2</label>
                    <input type="number" id="p2" min="0" max="5" step="0.01" value="4.1" disabled>
                </div>
                
                <div class="input-row">
                    <label for="p3">Parcial 3</label>
                    <input type="number" id="p3" min="0" max="5" step="0.01" value="3.9" disabled>
                </div>
            </div>
        </div>

        <!-- Resultado -->
        <div class="result-container">
            <h3 class="result-header">Nota necesaria en el último parcial</h3>
            <div class="result-value" id="result-value">0.000</div>
            <p class="result-message" id="result-message">
                Esta es la nota que necesitas obtener en el último parcial para alcanzar tu objetivo.
            </p>
            
            <div class="buttons-container">
                <button class="btn btn-primary" id="calculate-btn">
                    <i class="fas fa-calculator"></i> Calcular Nota Necesaria
                </button>
                <button class="btn btn-secondary" id="reset-btn">
                    <i class="fas fa-redo"></i> Restablecer
                </button>
            </div>
        </div>
    </div>

    <script>
        // Referencias a elementos del DOM
        const checkboxes = {
            q1: document.getElementById('q1-check'),
            p1: document.getElementById('p1-check'),
            q2: document.getElementById('q2-check'),
            p2: document.getElementById('p2-check'),
            q3: document.getElementById('q3-check'),
            p3: document.getElementById('p3-check'),
            q4: document.getElementById('q4-check')
        };

        const inputs = {
            q1: document.getElementById('q1'),
            p1: document.getElementById('p1'),
            q2: document.getElementById('q2'),
            p2: document.getElementById('p2'),
            q3: document.getElementById('q3'),
            p3: document.getElementById('p3'),
            q4: document.getElementById('q4')
        };

        const resultValue = document.getElementById('result-value');
        const resultMessage = document.getElementById('result-message');
        const calculateBtn = document.getElementById('calculate-btn');
        const resetBtn = document.getElementById('reset-btn');
        const menuItems = document.querySelectorAll('.menu-item');

        // Habilitar/deshabilitar inputs según el checkbox
        function toggleInputs() {
            for (const key in checkboxes) {
                if (checkboxes.hasOwnProperty(key)) {
                    const isChecked = checkboxes[key].checked;
                    inputs[key].disabled = !isChecked;
                    
                    // Si está deshabilitado, limpiar el valor
                    if (!isChecked) {
                        inputs[key].value = '';
                    } else {
                        // Si está habilitado, establecer un valor por defecto
                        const defaultValues = {
                            q1: 3.5, p1: 3.8, q2: 4.0, p2: 4.1, q3: 3.0, p3: 3.9, q4: 4.2
                        };
                        if (inputs[key].value === '') {
                            inputs[key].value = defaultValues[key];
                        }
                    }
                }
            }
        }

        // Calcular la nota necesaria
        function calculateRequiredGrade() {
            let sumQuices = 0;
            let sumParciales = 0;
            let quicesCount = 0;
            let parcialesCount = 0;
            
            // Sumar quices seleccionados
            for (const key of ['q1', 'q2', 'q3', 'q4']) {
                if (checkboxes[key].checked && inputs[key].value !== '') {
                    const value = parseFloat(inputs[key].value);
                    if (!isNaN(value) && value >= 0 && value <= 5) {
                        sumQuices += value;
                        quicesCount++;
                    }
                }
            }
            
            // Sumar parciales seleccionados
            for (const key of ['p1', 'p2', 'p3']) {
                if (checkboxes[key].checked && inputs[key].value !== '') {
                    const value = parseFloat(inputs[key].value);
                    if (!isNaN(value) && value >= 0 && value <= 5) {
                        sumParciales += value;
                        parcialesCount++;
                    }
                }
            }
            
            // Validar que haya al menos un quiz o parcial seleccionado
            if (quicesCount === 0 && parcialesCount === 0) {
                resultValue.textContent = "Error";
                resultMessage.textContent = "Debes seleccionar al menos una nota para calcular.";
                return;
            }
            
            // Calcular según la fórmula proporcionada
            // Xn = 3 - (Q1+Q2+Q3+Q4)*0.05 - (P1+P2+P3)*0.20
            // Xd = 0.20
            // X = Xn / Xd
            
            const Xn = 3 - (sumQuices * 0.05) - (sumParciales * 0.20);
            const Xd = 0.20;
            const X = Xn / Xd;
            
            // Mostrar resultado
            resultValue.textContent = X.toFixed(3);
            
            // Personalizar mensaje según el resultado
            if (X > 5) {
                resultMessage.textContent = "Necesitas más de 5.0 en el último parcial para alcanzar tu objetivo. Considera mejorar las notas actuales.";
                resultValue.style.color = "#e74c3c";
            } else if (X >= 3) {
                resultMessage.textContent = "Tienes un objetivo alcanzable. ¡Sigue esforzándote!";
                resultValue.style.color = "#2ecc71";
            } else if (X >= 0) {
                resultMessage.textContent = "Vas por buen camino. Sigue así para alcanzar tu objetivo.";
                resultValue.style.color = "#2ecc71";
            } else {
                resultMessage.textContent = "¡Ya superaste tu objetivo! Puedes mantener tu rendimiento actual.";
                resultValue.style.color = "#3498db";
            }
        }

        // Restablecer a valores por defecto
        function resetToDefault() {
            // Activar todos los checkboxes
            for (const key in checkboxes) {
                if (checkboxes.hasOwnProperty(key)) {
                    checkboxes[key].checked = true;
                }
            }
            
            // Establecer valores por defecto
            const defaultValues = {
                q1: 3.5, p1: 3.8, q2: 4.0, p2: 4.1, q3: 3.0, p3: 3.9, q4: 4.2
            };
            
            for (const key in inputs) {
                if (inputs.hasOwnProperty(key)) {
                    inputs[key].value = defaultValues[key];
                }
            }
            
            toggleInputs();
            calculateRequiredGrade();
        }

        // Validar entrada de notas
        function validateInput(input) {
            let value = parseFloat(input.value);
            
            if (isNaN(value)) {
                input.value = '';
                return;
            }
            
            // Limitar entre 0 y 5
            if (value < 0) {
                input.value = 0;
            } else if (value > 5) {
                input.value = 5;
            } else {
                // Redondear a 2 decimales
                input.value = Math.round(value * 100) / 100;
            }
        }

        // Event Listeners
        // Para checkboxes
        for (const key in checkboxes) {
            if (checkboxes.hasOwnProperty(key)) {
                checkboxes[key].addEventListener('change', toggleInputs);
            }
        }

        // Para inputs
        for (const key in inputs) {
            if (inputs.hasOwnProperty(key)) {
                inputs[key].addEventListener('change', function() {
                    validateInput(this);
                });
                
                inputs[key].addEventListener('blur', function() {
                    validateInput(this);
                });
            }
        }

        // Para botones
        calculateBtn.addEventListener('click', calculateRequiredGrade);
        resetBtn.addEventListener('click', resetToDefault);

        // Para elementos del menú
        menuItems.forEach(item => {
            item.addEventListener('click', function() {
                menuItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');
                
                // Aquí podrías agregar funcionalidad para cambiar entre secciones
                if (this.textContent.includes('Inicio')) {
                    document.querySelector('.header h2').textContent = 'Calculadora de Nota Deseada';
                    document.querySelector('.header p').textContent = 'Ingresa las notas que ya tienes y calcula lo que necesitas en el último parcial';
                }
            });
        });

        // Inicializar
        toggleInputs();
        calculateRequiredGrade();
    </script>
</body>
</html>